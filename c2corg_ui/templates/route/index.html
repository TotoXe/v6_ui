<%inherit file="../base.html"/>
<%namespace file="../helpers.html" import="get_attr, add_pagination_links"/>
<%block name="pagetitle">Routes</%block>
<%block name="metarobots"><meta name="robots" content="noindex,follow"></%block>\

<div class="text-center">
  <h3 ng-init="nbItems = ${total}">${self.pagetitle()} ({{nbItems}})</h3>
</div>
<section id="routes_section">
  <div class="add_route text-center">
  <button class="btn btn-success">
    <span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>
    <a href="${request.route_url('routes_add')}" translate>Add a route</a>
  </button>
    ${add_pagination_links('routes', routes, total, filter_params)}
  </div>
  <div id="routes">
    <div class="list">
      % for route in routes:
      <% locale = route['locales'][0] %>\
      <div class="list_item">
        <a href="${request.route_url('routes_view', id=route['document_id'], culture=locale['culture'])}">
          <span class="list_item_title">${locale['title']}</span>
          % if lang != locale['culture']:
          <span class="list_item_culture"> (${locale['culture']}) </span>
          <br>
          % endif
          <div class="list_item_info">
          % if route['elevation_max'] is not None:
            <span class="list_item_elevation">Elevation: ${route['elevation_max']} m</span>
          % endif
            <p class="text-justify">${locale['summary']}</p>
          </div>
        </a>
      </div>
      % endfor
    </div>
  </div>
</section>
% if len(routes):
<div class="map_right">
  <app-map></app-map>
</div>
% endif